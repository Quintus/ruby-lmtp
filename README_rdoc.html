<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/rdoc.css"/>
    <script src="javascripts/jquery.js"></script>
    <script src="javascripts/functions.js"></script>
    <script src="javascripts/emerald.js"></script>
    <title>README.rdoc</title>
  </head>
  <body>
    <div id="sidebar">
      <form id="search">
        <p><input type="text" placeholder="Regexp Search"/></p>
      </form>

      <div id="indices">
        <div class="index" id="file-index">
          <div class="header">
            <p>File Index</p>
          </div>

          <div class="list">
            <ul>
              
                
                
                  
                  <li class="code-file" style="display: none"><a href="LICENSE.html">LICENSE</a></li>
                
              
                
                
                  <li class="rdoc-file"><a href="README_rdoc.html">README.rdoc</a></li>
                
              
                
                
                  
                  <li class="code-file" style="display: none"><a href="lib/lmtp_rb.html">lmtp.rb</a></li>
                
              
              <li><a style="font-style: italic" id="toggle-all-files" href="#">Show all</a></li>
            </ul>
          </div>
        </div>

        <div class="index" id="class-index">
          <div class="header">
            <p>Class Index</p>
          </div>

          <div class="list">
            <ul>
              
                <li>
                  <a href="LmtpServer.html">LmtpServer</a>
                </li>
              
            </ul>
          </div>
        </div>

        <div class="index" id="method-index">
          <div class="header">
            <p>Method Index</p>
          </div>

          <div class="list">
            <ul>
              
                <li><a href="LmtpServer.html#method-c-new">::new</a>&nbsp;<span class="method-classname">(LmtpServer)</span></li>
              
                <li><a href="LmtpServer.html#method-i-headers">#headers</a>&nbsp;<span class="method-classname">(LmtpServer)</span></li>
              
                <li><a href="LmtpServer.html#method-i-logging">#logging</a>&nbsp;<span class="method-classname">(LmtpServer)</span></li>
              
                <li><a href="LmtpServer.html#method-i-start">#start</a>&nbsp;<span class="method-classname">(LmtpServer)</span></li>
              
                <li><a href="LmtpServer.html#method-i-stop">#stop</a>&nbsp;<span class="method-classname">(LmtpServer)</span></li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="content">
      <p id="documentation" class="toplevel-name">README.rdoc</p>


<h1 id="label-Minimal+LMTP+Server+for+Ruby">Minimal LMTP Server for Ruby<span><a href="#label-Minimal+LMTP+Server+for+Ruby">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>This project is a minimal LMTP server for Ruby. Ever wanted to stick your
Ruby application behind a real MTA like Postfix so it can receive mails
directly? This library is what you need.</p>

<p>This library provides a single class, <a
href="LmtpServer.html">LmtpServer</a>, which will open a UNIX domain socket
and listen for LMTP commands on it. You then direct your MTA to deliver the
mails it receives via LMTP over the socket opened by this library. The
email (and surroundings) will then show up in form of callbacks in your
application. To speak in terms of email administration, this library thus
implements an MDA (mail delivery agent).</p>

<p>It does not provide a means to actually process the emails you receive, you
will receive them as a large string with all the original CRLF line
separators included. It is recommended to use a library like <a
href="https://github.com/mikel/mail">mail</a> for that.</p>

<h2 id="label-Dependencies">Dependencies<span><a href="#label-Dependencies">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>None but Ruby’s standard <code>socket</code> library.</p>

<h2 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;lmtp&quot;</span>

<span class="ruby-constant">LmtpServer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;/var/spool/postfix/private/ruby-lmtp&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;-- Start email --&quot;</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">msg</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;-- End email --&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>You can find a lot more examples in the documentation of the <a
href="LmtpServer.html">LmtpServer</a> class.</p>

<h2 id="label-Security+considerations">Security considerations<span><a href="#label-Security+considerations">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>LMTP (RFC 2033) was not designed to be used over the WWW and the RFC
actively recommends against such usage. LMTP contains no authentication and
similar security measures; it is only intended to be used in a local,
trusted environment, which is the reason why this library only provides
UNIX domain sockets for listening and not TCP sockets.</p>

<p>Also keep in mind that this library is fairly minimal. While I think I have
implemented RFC 2033 correctly, I have not intensly read RFC 821 (SMTP),
which is referenced from the LMTP specification at certain parts. If
unusual commands are used over the UNIX socket, unexpected things may
happen in form of exceptions. Feel free to report such behaviour as a bug.</p>

<p>The library is not multithreaded. You can threadsafely call <a
href="LmtpServer.html#method-i-stop">LmtpServer#stop</a>, but email
messages will be proceeded one by one. If multiple clients connect to the
UNIX domain socket, they will be queued and handled after one another. That
is, if one client does not quit the connection, the entire server is
blocked until the (configurable) timeout value is reached.</p>

<h2 id="label-Links">Links<span><a href="#label-Links">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Repository: <a
href="https://github.com/Quintus/ruby-lmtp">github.com/Quintus/ruby-lmtp</a></p>
</li><li>
<p>Bugtracker: <a
href="https://github.com/Quintus/ruby-lmtp/issues">github.com/Quintus/ruby-lmtp/issues</a></p>
</li><li>
<p>The original Gist from which this project is a continuation: <a
href="https://gist.github.com/Quintus/f4faf26aa022f74f7778">gist.github.com/Quintus/f4faf26aa022f74f7778</a></p>
</li></ul>

<p>While you are at it, check out my (German) <a
href="http://www.quintilianus.eu">Blog</a>.</p>

<h2 id="label-License">License<span><a href="#label-License">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Copyright © 2015 Marvin Gülker</p>

<p>All rights reserved.</p>

<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<ol><li>
<p>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</p>
</li><li>
<p>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</p>
</li></ol>

<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS”
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</p>




  <script type="text/javascript">
    html = "<div class=\"toc\"><p>Contents</p>";
    html += generate_toc();
    html += "</div>";

    $(html).insertAfter("h1");
  </script>


      <div id="footer">
        <p style="width: 49%; float: left">Time: 2015-05-26 19:02:59 +0200</p>
        <p style="width: 49%; float: right; text-align: right">
          Generated by the
          <a href="https://github.com/Quintus/emerald">Emerald generator for RDoc</a>.
        </p>
      </div>
    </div>

    <div class="clear"></div>
  </body>
</html>
